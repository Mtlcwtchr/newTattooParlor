<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>EPAM Tattoo</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script type="text/javascript" src="js/script.js"></script>
  <meta charset="utf-8">
 </head>

<body>
<div th:insert="header :: header"></div>

<content id="profile" th:if="${session.currentUser.role == session.currentUser.role.CLIENT}">
  <div class="p-div personal-info">
    <h1 class="profile-h2">Личная информация</h1>
    <br>
    <img th:src="@{/loadProfilePic}">
    <form th:action="@{/updateProfilePic}" method="post" enctype="multipart/form-data">
      <input type="file" name="file">
      <button type="submit">Update profile</button>
    </form>
    <div id="update-profile-label" style="display: none">
      <span onclick="
      function updateLabel() {
        document.getElementById('update-profile-label').style.display = 'none';
        document.getElementById('show-profile-label').style.display = 'revert';
      }

      updateLabel()
      " class="update-label-button">karandashik</span>
      <form th:action="@{/updatePersonalInfo}" method="post" class="input-pers-info">
        <span>Имя</span><input type="text" name="name" th:value="${session.currentClient.name}"><br>
        <span>Номер телефона</span><input type="text" name="phone" th:value="${session.currentClient.phone}"><br>
        <span>E-mail:</span><input type="text" name="e-mail" th:value="${session.currentClient.user.email}"><br>
        <button type="submit">Сохранить изменения</button>
      </form>
    </div>
    <div id="show-profile-label">
      <span onclick="
      function showLabel() {
        document.getElementById('update-profile-label').style.display = 'revert';
        document.getElementById('show-profile-label').style.display = 'none';
      }

      showLabel()
      " class="show-label-button">karandashik</span>
      <span>Имя</span><span th:text="${session.currentClient.name}"></span><br>
      <span>Номер телефона</span><span th:text="${session.currentClient.phone}"></span><br>
      <span>E-mail:</span><span th:text="${session.currentClient.user.email}"></span><br>
    </div>
  </div>

  <div class="p-div orders">
    <h1 class="profile-h2">Заказы</h1>
    <br>
    <div th:each="order, iStat : ${session.currentClient.orders}">
      <div class="order">
        <div class="order-info">
          <span class="info-in">Заказчик: </span><span class="info-value" th:text="${order.client.name}"></span><br>
          <span class="info-in">Мастер: </span><span class="info-value" th:text="${order.master.name}"></span><br>
          <span class="info-in">Дата: </span><span class="info-value" th:text="${order.dateFormatted}"></span><br>
          <span class="info-in">Номер телефона: </span><span class="info-value" th:text="${order.contactPhone}"></span><br>
          <span class="info-in">Тариф: </span><span class="info-value" th:text="${order.product.difficultyDescription}"></span><br>
          <span class="info-in">Стоимость: </span><span class="info-value" th:text="${order.priceFormatted}"></span><br>
        </div>
        <img th:src="@{/loadFile(uri=${order.product.imageUri})}">
        <div class="order-status">
          <span>Статус заказа: </span><span th:text="${order.orderStatus.description}"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="p-div favs imgs">
    <h1>Избранное</h1>
    <div class="quad" th:each="quad, iStat : ${favourites}">
      <div class="item" th:each="item, iStat : ${quad}">
        <img class="sketch" th:src="@{/loadFile(uri=${item.imageUri})}">
      </div>
    </div>
  </div>

</content>

<footer>
  <hr>
  <p class="foo-content">Hello have a good day bro (:</p>
</footer>
</body>

</html>